<div class="admin-user-edit-container">
  <h2>Édition de l'utilisateur</h2>
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>
  <form *ngIf="!loading" [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
    <div *ngIf="success" class="alert alert-success">{{ success }}</div>
    <div class="mb-3">
      <label for="nom" class="form-label">Nom</label>
      <input id="nom" type="text" class="form-control" formControlName="nom">
      <div *ngIf="userForm.get('nom')?.invalid && userForm.get('nom')?.touched" class="text-danger">Nom requis</div>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input id="email" type="email" class="form-control" formControlName="email">
      <div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched" class="text-danger">Email valide requis</div>
    </div>
    <div class="mb-3">
      <label for="role" class="form-label">Rôle</label>
      <select id="role" class="form-select" formControlName="role">
        <option value="">Sélectionner un rôle</option>
        <option value="user">Utilisateur</option>
        <option value="formateur">Formateur</option>
        <option value="admin">Admin</option>
      </select>
      <div *ngIf="userForm.get('role')?.invalid && userForm.get('role')?.touched" class="text-danger">Rôle requis</div>
    </div>
    <button class="btn btn-primary" type="submit" [disabled]="userForm.invalid || loading">Enregistrer</button>
    <a class="btn btn-secondary ms-2" [routerLink]="['/admin/users']">Annuler</a>
  </form>
</div>
